window.bl=window.bl||{},function(n){var t=!1,i=window.ENV_CONFIG||"dev",o=window.location.host,e=["fashion.bloomingdales.com","www.bloomingdales.com","m.bloomingdales.com"],a=["view","link"],r={page_paths:{},call_page_tags:!0,use_attribute_tags:!0,attribute_tag:"utag"};var u=function(n,t,i){for(var o=0;o<n.length;o++)t.call(i,o,n[o])};function l(){(t=function(){try{return!!window.utag}catch(n){return c("ERROR: Could not find  library (from checkForLibrary method): "+n),!1}}())?(c("Library Initiated"),function(){if("dev"===i);else if("production"!==i)throw"ERROR: Unidentified env variable (from initEnvironment method)"}(),function(){if(r.use_attribute_tags){var n=document.querySelectorAll("["+r.attribute_tag+"]");u(n,function(n,t){t.onclick=function(){f("link",{event_name:t.getAttribute(r.attribute_tag)})}})}}(),function(){if(r.page_paths!={}&&r.call_page_tags){var n=r.page_paths[d()];void 0!==n&&f("view",{page_type:"marketing",page_name:n})}}()):c("ERROR: Could not find coremetrics library (from init method)")}function c(n){window.console&&-1===e.indexOf(o)&&console.log(n)}function f(n,i){(function(n,i){return t?void 0===n||""===n?(c("ERROR: No type defined"),!1):-1===a.indexOf(n)?(c("ERROR: Invalid tag type"),!1):void 0!==i&&i!=={}||(c("ERROR: Params not set"),!1):(c("ERROR: Library not found"),!1)})(n,i)&&(c("fireTag: Type: "+n+" Params: "+JSON.stringify(i)),window.utag[n](i))}function d(){var n=window.location.pathname.split("/");return""===n[n.length-1]?n[n.length-2]:n[n.length-1]}n.init=function(n){r=function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}(r,n),l()},n.fireTag=function(n,t){f(n,t)},n.path=function(){return d()},n.libraryFound=function(){return t}}(window.bl.utag=window.bl.utag||{});