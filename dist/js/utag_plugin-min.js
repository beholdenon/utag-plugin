window.bl=window.bl||{},function(t){var n=!1,i=window.ENV_CONFIG||"dev",o=window.location.host,e=["fashion.bloomingdales.com","www.bloomingdales.com","m.bloomingdales.com"],a=["view","link"],r={page_paths:{},call_page_tags:!0,use_attribute_tags:!0,attribute_tag:"utag"};var u=function(t,n,i){for(var o=0;o<t.length;o++)n.call(i,o,t[o])};function l(){(n=function(){try{return!!window.utag}catch(t){return c("ERROR: Could not find  library (from checkForLibrary method): "+t),!1}}())?(c("Library Initiated"),function(){if("dev"===i);else if("production"!==i)throw"ERROR: Unidentified env variable (from initEnvironment method)"}(),function(){if(r.use_attribute_tags){var t=document.querySelectorAll("["+r.attribute_tag+"]");u(t,function(t,n){n.onclick=function(){f("link",{event_name:n.getAttribute(r.attribute_tag)})}})}}(),function(){if(r.page_paths!={}&&r.call_page_tags){var t=r.page_paths[d()];void 0!==t&&f("view",{page_type:"marketing",page_name:t})}}()):c("ERROR: Could not find coremetrics library (from init method)")}function c(t){window.console&&-1===e.indexOf(o)&&console.log(t)}function f(t,i){if(function(t,i){return n?void 0===t||""===t?(c("ERROR: No type defined"),!1):-1===a.indexOf(t)?(c("ERROR: Invalid tag type"),!1):void 0!==i&&i!=={}||(c("ERROR: Params not set"),!1):(c("ERROR: Library not found"),!1)}(t,i))try{c("fireTag: Type: "+t+" Params: "+JSON.stringify(i)),window.utag[t](i)}catch(n){c("Error: Unable to call fireTag: type: "+t)}}function d(){var t=window.location.pathname.split("/");return""===t[t.length-1]?t[t.length-2]:t[t.length-1]}t.init=function(t){r=function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}(r,t),l()},t.fireTag=function(t,n){f(t,n)},t.path=function(){return d()},t.libraryFound=function(){return n}}(window.bl.utag=window.bl.utag||{});